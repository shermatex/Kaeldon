<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>KÆLDØN</title>

  <meta name="description" content="KÆLDØN operates between worlds — techno, trance, and chill for immersion." />
  <link rel="stylesheet" href="style.css" />
</head>

<body>
  <!-- HERO -->
  <header class="hero" role="banner" aria-label="KÆLDØN hero">
    <div class="overlay">
      <div class="hero-inner">
        <h1 class="logo" aria-label="KÆLDØN">KÆLDØN</h1>
        <p class="tagline">Operates between worlds.</p>
        <p class="madefor">Made for the hours when the world goes quiet and the mind goes deeper.</p>

        <div class="cta-row">
          <a class="btn btn-primary" href="#gallery">Enter Gallery</a>
          <a class="btn btn-ghost" href="#about">About</a>
          <a class="btn btn-ghost" href="#connect">Connect</a>
        </div>

        <p class="hero-tip">Tip: In the gallery, click any artwork to open a full-screen listening experience.</p>
      </div>
    </div>
  </header>

  <main>
    <!-- GALLERY -->
    <section id="gallery" class="section">
      <div class="container">
        <header class="section-head">
          <h2>Music Gallery</h2>
          <p class="sub">Not a playlist. A gallery. Choose a piece — the artwork opens and the track plays inside the world of KÆLDØN.</p>
        </header>

        <div class="gallery-grid" aria-label="Music Gallery Grid">
          <!-- LIVE TRACKS (5) -->
          <button class="art-card"
            type="button"
            data-title="Beneath Clear Water"
            data-mood="Tranquil / Unnerving"
            data-img="Beneath_Clear_Water.png"
            data-mp3="BENEATH CLEAR WATER.mp3"
          >
            <span class="art-thumb">
              <img src="./Beneath_Clear_Water.png" alt="Beneath Clear Water artwork" loading="lazy" />
            </span>
            <span class="art-meta">
              <span class="art-title">Beneath Clear Water</span>
              <span class="art-sub">Tranquil / Unnerving</span>
            </span>
          </button>

          <button class="art-card"
            type="button"
            data-title="Blood Under Ice"
            data-mood="Cold / Threatening"
            data-img="Blood_Under_Ice.png"
            data-mp3="BLOOD UNDER ICE.mp3"
          >
            <span class="art-thumb">
              <img src="./Blood_Under_Ice.png" alt="Blood Under Ice artwork" loading="lazy" />
            </span>
            <span class="art-meta">
              <span class="art-title">Blood Under Ice</span>
              <span class="art-sub">Cold / Threatening</span>
            </span>
          </button>

          <button class="art-card"
            type="button"
            data-title="Dark Descent"
            data-mood="Otherworld / Abyssal"
            data-img="Dark_Descent.png"
            data-mp3="DARK DESCENT.mp3"
          >
            <span class="art-thumb">
              <img src="./Dark_Descent.png" alt="Dark Descent artwork" loading="lazy" />
            </span>
            <span class="art-meta">
              <span class="art-title">Dark Descent</span>
              <span class="art-sub">Otherworld / Abyssal</span>
            </span>
          </button>

          <button class="art-card"
            type="button"
            data-title="Valhalla Awaits"
            data-mood="Mythic / Triumphant"
            data-img="Valhalla_Awaits.png"
            data-mp3="Valhalla Awaits.mp3"
          >
            <span class="art-thumb">
              <img src="./Valhalla_Awaits.png" alt="Valhalla Awaits artwork" loading="lazy" />
            </span>
            <span class="art-meta">
              <span class="art-title">Valhalla Awaits</span>
              <span class="art-sub">Mythic / Triumphant</span>
            </span>
          </button>

          <button class="art-card"
            type="button"
            data-title="Valkyrju-ferð"
            data-mood="Ritual / Ascendant"
            data-img="Valkury_fuerd.png"
            data-mp3="Valkyrju-fero.mp3"
          >
            <span class="art-thumb">
              <img src="./Valkury_fuerd.png" alt="Valkyrju-ferð artwork" loading="lazy" />
            </span>
            <span class="art-meta">
              <span class="art-title">Valkyrju-ferð</span>
              <span class="art-sub">Ritual / Ascendant</span>
            </span>
          </button>

          <!-- COMING SOON (3) — keeps the grid balanced -->
          <div class="art-card art-card--soon" aria-label="Coming soon">
            <span class="art-thumb art-thumb--soon">
              <span class="soon-mark">Coming Soon</span>
            </span>
            <span class="art-meta">
              <span class="art-title">New Piece</span>
              <span class="art-sub">In creation</span>
            </span>
          </div>

          <div class="art-card art-card--soon" aria-label="Coming soon">
            <span class="art-thumb art-thumb--soon">
              <span class="soon-mark">Coming Soon</span>
            </span>
            <span class="art-meta">
              <span class="art-title">New Piece</span>
              <span class="art-sub">In creation</span>
            </span>
          </div>

          <div class="art-card art-card--soon" aria-label="Coming soon">
            <span class="art-thumb art-thumb--soon">
              <span class="soon-mark">Coming Soon</span>
            </span>
            <span class="art-meta">
              <span class="art-title">New Piece</span>
              <span class="art-sub">In creation</span>
            </span>
          </div>
        </div>
      </div>
    </section>

    <!-- ABOUT -->
    <section id="about" class="section section-muted">
      <div class="container">
        <header class="section-head section-head--center">
          <h2>About KÆLDØN</h2>
        </header>

        <div class="prose prose--center">
          <p><strong>KÆLDØN operates between worlds.</strong></p>
          <p>
            Blending techno, trance, and chill into a single continuum, KÆLDØN creates music designed for immersion rather than moments.
            His sound lives in the space between movement and stillness — where rhythm becomes atmosphere and melody dissolves into feeling.
          </p>
          <p>
            Rather than chasing genre boundaries, KÆLDØN treats them as raw material. Pulsing basslines, hypnotic textures, and expansive soundscapes
            are layered with restraint and intention, drawing influence from Nordic minimalism, deep electronic traditions, and the quiet power of repetition.
          </p>
        </div>
      </div>
    </section>

    <!-- CONNECT -->
    <section id="connect" class="section">
      <div class="container">
        <header class="section-head section-head--center">
          <h2>Connect</h2>
          <p class="sub">Find KÆLDØN on your platforms.</p>
        </header>

        <ul class="links">
          <li><a href="https://open.spotify.com/artist/4CdrbLeTwe0oz78XPZRjBk" target="_blank" rel="noopener">Spotify</a></li>
          <li><a href="https://music.apple.com/us/search?term=k%C3%A6ld%C3%B8n" target="_blank" rel="noopener">Apple Music</a></li>
          <li><a href="https://music.amazon.com/search/K%C3%86LD%C3%98N?filter=IsLibrary%7Cfalse&sc=none" target="_blank" rel="noopener">Amazon Music</a></li>
        </ul>
      </div>
    </section>
  </main>

  <footer class="footer">
    <div class="container">
      <p>© <span id="year"></span> KÆLDØN. All rights reserved.</p>
    </div>
  </footer>

  <!-- MODAL -->
  <div id="modal" class="modal" aria-hidden="true">
    <div class="modal-backdrop" data-close="true"></div>

    <div class="modal-shell" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
      <button class="modal-close" type="button" aria-label="Close" data-close="true">✕</button>

      <div class="modal-art">
        <img id="modalImg" alt="" />
        <div class="modal-art-glow" aria-hidden="true"></div>
      </div>

      <div class="modal-panel">
        <div class="modal-head">
          <div>
            <div id="modalTitle" class="modal-title"></div>
            <div id="modalMood" class="modal-mood"></div>
          </div>

          <div class="modal-controls">
            <button id="prevBtn" class="icon-btn" type="button" aria-label="Previous">‹</button>
            <button id="playBtn" class="icon-btn icon-btn--primary" type="button" aria-label="Play/Pause">►</button>
            <button id="nextBtn" class="icon-btn" type="button" aria-label="Next">›</button>
          </div>
        </div>

        <div class="modal-progress">
          <span id="timeNow" class="time">0:00</span>
          <input id="seek" class="seek" type="range" min="0" max="1000" value="0" aria-label="Seek" />
          <span id="timeEnd" class="time">0:00</span>
        </div>

        <div class="modal-foot">
          <div id="statusText" class="status" aria-live="polite"></div>

          <div class="listen-outs">
            <span class="listen-label">Later:</span>
            <a class="pill" href="https://open.spotify.com/artist/4CdrbLeTwe0oz78XPZRjBk" target="_blank" rel="noopener">Spotify</a>
            <a class="pill" href="https://music.apple.com/us/search?term=k%C3%A6ld%C3%B8n" target="_blank" rel="noopener">Apple Music</a>
            <a class="pill" href="https://music.amazon.com/search/K%C3%86LD%C3%98N?filter=IsLibrary%7Cfalse&sc=none" target="_blank" rel="noopener">Amazon Music</a>
          </div>
        </div>

        <audio id="audio" preload="metadata" playsinline></audio>
      </div>
    </div>
  </div>

  <script>
    (function () {
      const year = document.getElementById('year');
      year.textContent = new Date().getFullYear();

      const cards = Array.from(document.querySelectorAll('.art-card[data-mp3]'));

      const modal = document.getElementById('modal');
      const modalImg = document.getElementById('modalImg');
      const modalTitle = document.getElementById('modalTitle');
      const modalMood = document.getElementById('modalMood');
      const status = document.getElementById('statusText');

      const audio = document.getElementById('audio');
      const playBtn = document.getElementById('playBtn');
      const prevBtn = document.getElementById('prevBtn');
      const nextBtn = document.getElementById('nextBtn');

      const seek = document.getElementById('seek');
      const timeNow = document.getElementById('timeNow');
      const timeEnd = document.getElementById('timeEnd');

      let idx = 0;
      let isOpen = false;

      function fmtTime(sec) {
        if (!isFinite(sec) || sec < 0) return '0:00';
        const m = Math.floor(sec / 60);
        const s = Math.floor(sec % 60);
        return `${m}:${String(s).padStart(2, '0')}`;
      }

      function setStatus(msg) {
        status.textContent = msg || '';
      }

      function setPlayIcon(playing) {
        playBtn.textContent = playing ? '❚❚' : '►';
        playBtn.setAttribute('aria-label', playing ? 'Pause' : 'Play');
      }

      function openModal() {
        modal.classList.add('is-open');
        modal.setAttribute('aria-hidden', 'false');
        document.body.classList.add('no-scroll');
        isOpen = true;
      }

      function closeModal() {
        modal.classList.remove('is-open');
        modal.setAttribute('aria-hidden', 'true');
        document.body.classList.remove('no-scroll');
        isOpen = false;

        audio.pause();
        setPlayIcon(false);
        setStatus('');
      }

      function loadTrack(i, autoPlay = true) {
        idx = (i + cards.length) % cards.length;
        const c = cards[idx];

        const title = c.dataset.title || '';
        const mood = c.dataset.mood || '';
        const img = c.dataset.img || '';
        const mp3 = c.dataset.mp3 || '';

        modalTitle.textContent = title;
        modalMood.textContent = mood;

        modalImg.src = encodeURI('./' + img);
        modalImg.alt = title + ' artwork';

        audio.src = encodeURI('./' + mp3);
        audio.load();

        seek.value = 0;
        timeNow.textContent = '0:00';
        timeEnd.textContent = '0:00';

        setStatus('Loading…');

        if (autoPlay) {
          audio.play().then(() => {
            setPlayIcon(true);
            setStatus('');
          }).catch(() => {
            setPlayIcon(false);
            setStatus('Playback blocked. Tap play.');
          });
        } else {
          setPlayIcon(false);
          setStatus('');
        }
      }

      cards.forEach((c, i) => {
        c.addEventListener('click', () => {
          openModal();
          loadTrack(i, true);
        });
      });

      // Close handlers
      modal.addEventListener('click', (e) => {
        const t = e.target;
        if (t && t.dataset && t.dataset.close === 'true') closeModal();
      });

      document.addEventListener('keydown', (e) => {
        if (!isOpen) return;
        if (e.key === 'Escape') closeModal();
        if (e.key === 'ArrowLeft') loadTrack(idx - 1, true);
        if (e.key === 'ArrowRight') loadTrack(idx + 1, true);
        if (e.key === ' ') {
          e.preventDefault();
          togglePlay();
        }
      });

      function togglePlay() {
        if (audio.paused) {
          setStatus('Loading…');
          audio.play().then(() => {
            setPlayIcon(true);
            setStatus('');
          }).catch(() => {
            setPlayIcon(false);
            setStatus('Playback blocked. Tap play.');
          });
        } else {
          audio.pause();
          setPlayIcon(false);
          setStatus('');
        }
      }

      playBtn.addEventListener('click', togglePlay);
      prevBtn.addEventListener('click', () => loadTrack(idx - 1, true));
      nextBtn.addEventListener('click', () => loadTrack(idx + 1, true));

      audio.addEventListener('loadedmetadata', () => {
        timeEnd.textContent = fmtTime(audio.duration);
        setStatus('');
      });

      audio.addEventListener('timeupdate', () => {
        const d = audio.duration || 0;
        const t = audio.currentTime || 0;
        timeNow.textContent = fmtTime(t);

        if (d > 0) {
          const v = Math.min(1000, Math.max(0, Math.round((t / d) * 1000)));
          seek.value = v;
        }
      });

      audio.addEventListener('ended', () => {
        setPlayIcon(false);
        // Auto-advance keeps the gallery “flowing”
        loadTrack(idx + 1, true);
      });

      audio.addEventListener('error', () => {
        setPlayIcon(false);
        setStatus('Audio not found. Confirm MP3 name + repo root + committed.');
      });

      // Seeking
      seek.addEventListener('input', () => {
        const d = audio.duration || 0;
        if (!d) return;
        audio.currentTime = (Number(seek.value) / 1000) * d;
      });
    })();
  </script>
</body>
</html>
